
import tweepy
from tweepy import Stream
from tweepy.streaming import StreamListener
# Consumer keys and access tokens, used for OAuth
consumer_key = 'nb38L1bDfX3wcjc4YTmiry8lZ'
consumer_secret = 'EBUnTHioHm5cyFMLqDORFHNkiDKSJ8dtAntoTk4fCq2vnw1W0u'
access_token = '1010412156-TlqsIj9UQLoJn4rj1phEDPiQmbCW6Zkzcr587lx'
access_token_secret = '8XYA7dZ11h8YorSk6v9EFfTZLBhKuhdh4jBPqah2mjVyN'
 
# OAuth process, using the keys and tokens
auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
 
# Creation of the actual interface, using authentication
api = tweepy.API(auth)
 
# Sample method, used to update a status
#api.update_status('Hello Python Central!')

user = api.me()
 
print('Name: ' + user.name)
print('Location: ' + user.location)
print('Friends: ' + str(user.friends_count))


 
class MyListener(StreamListener):
 
    def on_data(self, data):
        try:
            with open('OneNationOneLaw.json', 'a') as f:
                f.write(data)
                return True
        except BaseException as e:
                print("error")
        return True
 
    def on_error(self, status):
        print(status)
        return True
 
twitter_stream = Stream(auth, MyListener())
twitter_stream.filter(track=['#OneNationOneLaw'])